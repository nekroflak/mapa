<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KAM</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-control-geocoder/dist/Control.Geocoder.css" />

  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    #map {
      height: 100%;
      width: 100%;
    }
    .leaflet-control-geocoder-form input[type="text"] {
      width: 300px;
      padding: 10px;
      font-size: 16px;
    }

    /* PANEL W LEWYM DOLNYM ROGU */
    #side-panel {
      position: absolute;
      bottom: 20px;
      left: 20px;
      width: 300px;
      background: rgba(255, 255, 255, 0.95);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      font-family: Arial, sans-serif;
      max-height: 500px;
      overflow-y: auto;
      z-index: 9999;
    }

    #side-panel h3 {
      margin: 0 0 10px 0;
      font-size: 18px;
    }

    .region {
      margin-top: 10px;
      cursor: pointer;
      font-weight: bold;
      padding: 8px;
      border-radius: 5px;
      color: #fff; /* domyślnie biała czcionka */
    }

    .names {
      margin-left: 0;
      margin-top: 5px;
      display: none;
      padding-left: 5px;
      border-radius: 5px;
    }

    .names div {
      padding: 5px;
      margin-bottom: 2px;
    }

    /* Stonowane kolory dla regionów (tylko nagłówki .region) */
    .lubuskie-region { background-color:  #6bb0c4; }
    .pomorskie-region { background-color: #6bc48c; }
    .mazowieckie-region { background-color: #c46b6b; }
    .swietokrzyskie-region { background-color: #c4a36b; }
    .dolnoslaskie-region { background-color: #a36bc4; }

    /* Kolory dla Office i Łódzkie – jasne tło i ciemny tekst */
    .office-region, .lodzkie-region {
      background-color: #f0f0f0;
      color: #333;
    }

  </style>
</head>

<body>
  <div id="map"></div>

  <div id="side-panel">
    <h3>KAM na region ▼</h3>

    <div class="region lubuskie-region">Lubuskie | Zachodniopomorskie | Wielkopolskie</div>
    <div class="names">
      <div>• Sochacki</div>
      <div>• Urbas</div>
      <div>• Klim</div>
      <div>• Sikora</div>
    </div>

    <div class="region pomorskie-region">Pomorskie | Kujawsko-Pomorskie | Warmińsko-Mazurskie</div>
    <div class="names">
      <div>• Bołwan</div>
      <div>• Tantlewicz</div>
      <div>• Kunz</div>
    </div>

    <div class="region mazowieckie-region">Podlaskie | Mazowieckie</div>
    <div class="names">
      <div>• Wójcik</div>
      <div>• Karwowski</div>
      <div>• Krupiński</div>
      <div>• Pawłowski</div>
      <div>• Nesterowicz</div>
    </div>

    <div class="region swietokrzyskie-region">Świętokrzyskie | Lubelskie | Małopolskie | Podkarpackie</div>
    <div class="names">
      <div>• Osika</div>
      <div>• Szota</div>
      <div>• Boldys</div>
      <div>• Grunt</div>
      <div>• Kaczmarski</div>
    </div>

    <div class="region dolnoslaskie-region">Dolnośląskie | Opolskie | Śląskie</div>
    <div class="names">
      <div>• Motus-Zatoka</div>
      <div>• Koszewski</div>
      <div>• Olczak</div>
      <div>• Jakubczyk</div>
    </div>

    <div class="region office-region">Office</div>
    <div class="names">
      <div>• Kamińska - Trojmiasto | Poznań | Wrocław</div>
      <div>• Dębicka - Kraków | Katowice</div>
      <div>• Sieradz - Warszawa</div>
      <div>• Szkólski - Łódź</div>
    </div>

    <div class="region lodzkie-region">ŁÓDZKIE - Dla każdego KAM'a</div>
    <div class="names">
      <div>• Bołwan jest z Łodzi, dawajmy mu tam jak możemy xd</div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

  <script>
    var map = L.map('map');

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Dla SDR <a href="https://www.openstreetmap.org/">OpenStreetMap</a> pomogło',
      maxZoom: 18,
    }).addTo(map);

    var southWest = L.latLng(49.00, 14.00),
        northEast = L.latLng(55.05, 24.15),
        bounds = L.latLngBounds(southWest, northEast);

    map.fitBounds(bounds);
    map.on('load', function() {
      map.setMaxBounds(bounds);
    });

    L.Control.geocoder({placeholder: "Wyszukaj miejscowość..."}).addTo(map);

    // Obsługa rozwijania list
    const regions = document.querySelectorAll('.region');
    regions.forEach(region => {
      region.addEventListener('click', () => {
        const next = region.nextElementSibling;
        next.style.display = next.style.display === "block" ? "none" : "block";
      });
    });

    // Funkcja dodająca GeoJSON z kolorem granicy
    function addGeoJSON(url, tooltipText, color) {
      fetch(url)
        .then(res => res.json())
        .then(data => {
          var layer = L.geoJSON(data, {style: {color: color, weight:2, fillOpacity:0.2}}).addTo(map);
          layer.bindTooltip(tooltipText, {permanent:false,direction:"center"}).openTooltip();
        });
    }

    // Dodanie poligonów z przypisanymi kolorami
    addGeoJSON('https://gist.githubusercontent.com/nekroflak/90277d850a02049505bf97dd2c9fdeef/raw/0c247118cf65d0c61ff42dd6c7f819c74190bd29/gistfile1.json',
               "Sieradz, Szkólski (Office), Nesterowicz, Wójcik, Karwowski, Krupiński, Pawłowski",'#c46b6b');

    addGeoJSON('https://gist.githubusercontent.com/nekroflak/0b4d0d7852ed2ca7f28b3737cf0f4a8d/raw/b3180be2e7c6cc1e993fc5baf737d54f00b3bace/gistfile1.json',
               "Boldys, Dębicka(Office), Osika, Szota, Grunt, Kaczmarski",'#c4a36b');

    addGeoJSON('https://gist.githubusercontent.com/nekroflak/953c5142079914d1264c935ceaded468/raw/5084adbbb1a852caf48afc204624d4c72264532f/gistfile1.json',
               "Motus, Olczak, Koszewski, Jakubczyk, (Angelika Kamińska Office)",'#a36bc4');

    addGeoJSON('https://gist.githubusercontent.com/nekroflak/38f48b87f01ed4906ba476944933c5a6/raw/aede39903a3d50681b9a0b65351fed1715a86429/gistfile1.json',
               "Sochacki, Urbas, Sikora, Klim, (A.Kamińska Office)",'#6bb0c4');

    addGeoJSON('https://gist.githubusercontent.com/nekroflak/7093ce1322339a6e057200a47a51b142/raw/39efa4c41a3c8f9efc998e000053e61e4b6e069e/gistfile1.json',
               "Bołwan, Tantlewicz, Kunz (Angelika Kamińska Office)",'#6bc48c');

  </script>
</body>
</html>
